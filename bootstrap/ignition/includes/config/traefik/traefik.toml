################################################################
# Global configuration
################################################################
[global]
checkNewVersion = false
sendAnonymousUsage = false

################################################################
# Entrypoints configuration
################################################################
[entryPoints]
[entryPoints.web]
address = ":80"
[entryPoints.web.http.redirections]
[entryPoints.web.http.redirections.entryPoint]
to = "websecure"
scheme = "https"

[entryPoints.websecure]
address = ":443"


################################################################
# Traefik logs configuration
################################################################
[log]
#level = "DEBUG"

################################################################
# Access logs configuration
################################################################
[accessLog]


################################################################
# API and dashboard configuration
################################################################
[api]
# insecure = true
# dashboard = false

################################################################
# Ping configuration
################################################################
[ping]
# entryPoint = "traefik"

################################################################
# Ping configuration
################################################################
[providers.file]
directory = "/etc/traefik/conf.d"
watch = true

################################################################
# Docker configuration backend
################################################################
[providers.docker]
endpoint = "unix:///var/run/docker.sock"
exposedByDefault = false
network = "systemd-ingress"
allowEmptyServices = true
watch = true

################################################################
# TLS configuration
################################################################
[tls.options]
[tls.options.default]
sniStrict = true
minVersion = "VersionTLS12"
cipherSuites = [
  "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
  "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256",
  "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256",
  "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
  "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
]

################################################################
# Acme (letsencrypt / step-ca) configuration
################################################################
[certificatesResolvers.letsencrypt.acme]
email = "hostmaster@molier.net"
storage = "/etc/traefik/acme.letsencrypt.json"
[certificatesResolvers.letsencrypt.acme.tlsChallenge]

[certificatesResolvers.step-ca.acme]
caServer = "https://ca.home.molier.net/acme/acme/directory"
email = "hostmaster@molier.net"
storage = "/etc/traefik/acme.step-ca.json"
[certificatesResolvers.step-ca.acme.httpChallenge]
entryPoint = "web"
